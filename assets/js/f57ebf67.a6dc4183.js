"use strict";(self.webpackChunkdocs_oasis_io=self.webpackChunkdocs_oasis_io||[]).push([[7793],{5858:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"node/run-your-node/troubleshooting","title":"Troubleshooting","description":"Before you begin troubleshooting we suggest you check all of the following:","source":"@site/docs/node/run-your-node/troubleshooting.md","sourceDirName":"node/run-your-node","slug":"/node/run-your-node/troubleshooting","permalink":"/node/run-your-node/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/oasisprotocol/docs/edit/main/docs/node/run-your-node/troubleshooting.md","tags":[],"version":"current","lastUpdatedAt":1740674219000,"frontMatter":{},"sidebar":"operators","previous":{"title":"Remote Signer for Oasis Node Keys","permalink":"/node/run-your-node/advanced/remote-signer"},"next":{"title":"Web3 Gateway","permalink":"/node/web3"}}');var o=s(4848),r=s(8453);const t={},d="Troubleshooting",l={},a=[{value:"Running a Node",id:"running-a-node",level:2},{value:"Invalid Permissions",id:"invalid-permissions",level:3},{value:"Permissions for node and entity",id:"permissions-for-node-and-entity",level:4},{value:"Permissions for .pem files",id:"permissions-for-pem-files",level:4},{value:"Node directory Ownership",id:"node-directory-ownership",level:4},{value:"Cannot Find File",id:"cannot-find-file",level:3},{value:"Staking and Registering",id:"staking-and-registering",level:2},{value:"Transaction Out of Gas",id:"transaction-out-of-gas",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsx)(n.mdxAdmonitionTitle,{children:(0,o.jsx)(n.strong,{children:"BEFORE YOU BEGIN TROUBLESHOOTING"})}),(0,o.jsx)(n.p,{children:"Before you begin troubleshooting we suggest you check all of the following:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Check that your current binary version is the latest listed on the Network Parameters page (",(0,o.jsx)(n.a,{href:"/node/mainnet/",children:"Mainnet"}),", ",(0,o.jsx)(n.a,{href:"/node/testnet/",children:"Testnet"}),")"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Check the version on your localhost using ",(0,o.jsx)(n.code,{children:"oasis-node --version"})]}),"\n",(0,o.jsxs)(n.li,{children:["Check the version on your server using ",(0,o.jsx)(n.code,{children:"oasis-node --version"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"If upgrading, make sure that you've wiped state (unless that is explicitly not required)"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"If you're doing anything with the entity:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Do you have the latest genesis?"}),"\n",(0,o.jsx)(n.li,{children:"Do you have the correct private key (or Ledger device)."}),"\n",(0,o.jsxs)(n.li,{children:["If you're signing a transaction:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Do you sufficient account balance to make the transaction?","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Run ",(0,o.jsx)(n.code,{children:"oasis-node stake account info"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Are you using the correct nonce?","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Run ",(0,o.jsx)(n.code,{children:"oasis-node stake account info"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"If you're generating a transaction:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Do you have the latest genesis?"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"If you're submitting a transaction:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Do you have the latest genesis?"}),"\n",(0,o.jsx)(n.li,{children:"Is your node synced? If not, the transaction will fail to run properly"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,o.jsx)(n.h2,{id:"running-a-node",children:"Running a Node"}),"\n",(0,o.jsx)(n.h3,{id:"invalid-permissions",children:"Invalid Permissions"}),"\n",(0,o.jsx)(n.h4,{id:"permissions-for-node-and-entity",children:"Permissions for node and entity"}),"\n",(0,o.jsx)(n.p,{children:"Error Message:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"common/Mkdir: path '/node/data' has invalid permissions: -rwxr-xr-x\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"entity"})," and ",(0,o.jsx)(n.code,{children:"node"})," directories both need to have permissions ",(0,o.jsx)(n.code,{children:"rwx------"}),". Make sure you initialize the directory with correct permissions or change them using ",(0,o.jsx)(n.code,{children:"chmod"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mkdir --mode 700 --parents {entity,node}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"chmod 700 /node/data\nchmod 700 /node/etc\n"})}),"\n",(0,o.jsx)(n.h4,{id:"permissions-for-pem-files",children:"Permissions for .pem files"}),"\n",(0,o.jsx)(n.p,{children:"Error Message example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"signature/signer/file: invalid PEM file permissions 700 on /node/data/identity.pem\n"})}),"\n",(0,o.jsxs)(n.p,{children:["All ",(0,o.jsx)(n.code,{children:".pem"})," files should have the permissions ",(0,o.jsx)(n.code,{children:"600"}),". You can set the permissions for all ",(0,o.jsx)(n.code,{children:".pem"})," files in a directory using the following command:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"chmod -R 600 /path/*.pem\n"})}),"\n",(0,o.jsx)(n.h4,{id:"node-directory-ownership",children:"Node directory Ownership"}),"\n",(0,o.jsxs)(n.p,{children:["Another possible cause of permission issues is not giving ownership of your ",(0,o.jsx)(n.code,{children:"node/"})," to the user running the node (e.g. ",(0,o.jsx)(n.code,{children:"docker-host"})," or replace with your user):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"chown -R docker-host:docker-host /node\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In general, to avoid problems when running docker, specify the user when running ",(0,o.jsx)(n.code,{children:"docker"})," commands by adding the flag ",(0,o.jsx)(n.code,{children:"--user $(id -u):$(id -g)"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"cannot-find-file",children:"Cannot Find File"}),"\n",(0,o.jsx)(n.p,{children:"Error Message examples:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"no such file or directory\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"file does not exist\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:'ts=2019-11-17T03:42:09.778647033Z level=error module=cmd/registry/node caller=node.go:127 msg="failed to load entity" err="file does not exist"\n'})}),"\n",(0,o.jsxs)(n.p,{children:["More often than you'd expect, this error is the result of setting the path incorrectly. You may have left something like ",(0,o.jsx)(n.code,{children:"--genesis.file $GENESIS_FILE_PATH"})," in the command without setting ",(0,o.jsx)(n.code,{children:"$GENESIS_FILE_PATH"})," first, or set the path incorrectly. Check that ",(0,o.jsx)(n.code,{children:"echo $GENESIS_FILE_PATH"})," matches your expectation or provide a path in the command."]}),"\n",(0,o.jsx)(n.p,{children:"Another possible cause: the files in your localhost directory cannot be read from the container. Make sure to run commands in the same session within the container."}),"\n",(0,o.jsx)(n.h2,{id:"staking-and-registering",children:"Staking and Registering"}),"\n",(0,o.jsx)(n.h3,{id:"transaction-out-of-gas",children:"Transaction Out of Gas"}),"\n",(0,o.jsx)(n.p,{children:"Error message:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:'module=cmd/stake caller=stake.go:70 msg="failed to submit transaction" err="rpc error: code = Unknown desc = staking: add escrow transaction failed: out of gas" attempt=1\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The docs are now updated to show that you need to add ",(0,o.jsx)(n.code,{children:"--stake.transaction.fee.gas"})," and ",(0,o.jsx)(n.code,{children:"--stake.transaction.fee.amount"})," flags when generating your transaction. Note that if you're re-generating a transaction, you will need to increment the ",(0,o.jsx)(n.code,{children:"--nonce"})," flag."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(6540);const o={},r=i.createContext(o);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);